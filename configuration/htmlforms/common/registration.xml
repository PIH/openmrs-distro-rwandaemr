<htmlform id="registration-form"
          formUuid="c2d8e8d1-825c-11ef-b23c-0242ac120002"
          formName="Registration"
          formEncounterType="cfe614d5-fa7e-4919-b76b-a66117f57e4c"
          formVersion="1.0">

    <style>
    </style>

    <macros>
        <macro key="serviceRequestedQuestion" expression="fn.globalProperty('registration.serviceRequestedConcept')"/>
        <!-- The below 2 expressions are provided by the ImbEmrVelocityContextProvider -->
        <macro key="serviceConcepts" expression="appointmentServiceConceptUuids"/>
        <macro key="serviceLabels" expression="appointmentServiceConceptNames"/>
    </macros>

    <ifMode mode="VIEW" include="false">
        <script type="text/javascript">
            // When opening the form, skip to the service requested section for faster entry
            jq(function() {
                jq("#service-requested-question > select").focus();
            });
        </script>
    </ifMode>

    <section id="encounter-details-section" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="">

        <div class="row col-12">
            <div class="col-12">
                <label for="encounterDate"><uimessage code="imbemr.registration.encounter.date.label"/></label>
                <encounterDate id="encounterDate" showTime="true" default="now"/>
            </div>
            <div class="col-12">
                <label for="encounterProvider"><uimessage code="imbemr.registration.encounter.provider.label"/></label>
                <encounterProviderAndRole id="encounterProvider" default="currentUser" encounterRole="e8a0fb6a-aba5-11e1-b9e7-002713655c9f" required="true"/>
            </div>
            <div class="col-12">
                <label for="encounterLocation"><uimessage code="imbemr.registration.encounter.location.label"/></label>
                <!-- TODO: Determine what location tags to limit this to: eg.  tags="Registration Location" -->
                <encounterLocation default="SessionAttribute:emrContext.sessionLocationId" required="true"/>
            </div>
        </div>
        <br/>
        <div class="row col-12">
            <div class="col-6">
                <label for="service-requested-question"><uimessage code="imbemr.registration.encounter.serviceRequested.label"/></label>
                <obs id="service-requested-question"
                     conceptId="$serviceRequestedQuestion"
                     answerConceptIds="$serviceConcepts"
                     answerLabels="$serviceLabels"
                     style="dropdown"
                     required="true"
                     size="18">
                </obs>
            </div>

            <div class="col-6">
                <label for="insurance-question"><uimessage code="imbemr.insurance"/></label>
                <span>TODO</span>
            </div>
        </div>

        <submit/>

    </section>

</htmlform>
